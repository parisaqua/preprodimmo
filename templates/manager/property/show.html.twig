{% extends 'base.html.twig' %}

{% block title %}- Détail de mon bien n° ...{% endblock %}

{% block body %}

<div class="container">

    <div class="row mt-4">
        <div class="col-md-4 jumbotron">
            <div data-slider>
                {% if property.picture %}
                    {% for picture in property.pictures %}
                        <img src="{{ vich_uploader_asset(picture, 'imageFile') | imagine_filter('medium') }}" alt="card-img-top" style="width: 100%; height:auto;">
                    {% endfor %}
                {% else %}
                    <img src="{{ '/images/default-property.jpg' | imagine_filter('medium') }}" alt="card-img-top" style="width: 100%; height:auto;">
                {% endif %}
            </div>
        </div>
        <div class="col-md-8">
            <div class="row">
                <div class="col-md-8"><h2> {{ property.title }} </h2></div>
                <div class="col-md-4 text-right">
                    {% if app.user and is_granted('ROLE_ADMIN') %}
                        <a href=" {{ path('admin.property.manager.edit', {id: property.id}) }} " class="btn btn-info"><i class="fas fa-pencil-alt"></i>&nbsp; Editer le bien</a>
                    {% elseif app.user and app.user == property.manager %}
                        <a href=" {{ path('property.manager.edit', {id: property.id}) }} " class="btn btn-info"><i class="fas fa-pencil-alt"></i>&nbsp; Editer le bien</a>
                    {% endif %}
                </div>
            </div>
            
            <h3> {{ property.rooms }} pièces - {{ property.surface | number_format(2,',', ' ') }} m² </h3>
            
            <hr>
            <div class="row">
                <div class="col-md-8"><h3>Bail</h3></div>
                <div class="col-md-4 text-right">
                    <a href="{{ path('lease.manager.new')}}" class="btn btn-info btn-right mb-2"><i class="fas fa-plus"></i>&nbsp;Ajouter un bail</a>
                </div>
            </div>
            
            {% for lease in property.leases %}
                <div class="col-md-4 current-doc" id="currentDoc">
                    <p>Loyer : {{ lease.rent | number_format(2,',', ' ') }} €</p>
                    <p>Charges : {{ lease.charges | number_format(2,',', ' ') }} €</p>
                </div>
            {% endfor %}
            

            <hr>

            <div class="row">
                <div class="col-md-8"><h3>Documents</h3></div>
                <div class="col-md-4 text-right">
                    <a href=" {{ path('property.manager.edit', {id: property.id}) }}#property_documents" class="btn btn-info"><i class="fas fa-pencil-alt"></i></a>
                </div>
            </div>
            <div class="row">
                {% for document in property.documents %}
                    <div class="col-md-2 current-doc" id="currentDoc" style="margin: 5px auto;">
                        <a href="{{asset (vich_uploader_asset (document, 'documentFile'))}}" target="_blank" title="{{document.fileName}}">
                        <img class="doc" src="{{  '/images/pdf.png' }}" alt="">
                        <p> {{document.name}}</p>
                        </a>
                    </div>
                {% endfor %}
            </div>
            

        </div>
    </div>

    <div class="row">
        <div class="col-md-12 text-center">
                <a href=" {{ path('myproperty.manager.index') }} " class="btn btn-secondary">Retour à la liste</a>
        </div>
    </div>
   
</div>
        


 






{% endblock %}